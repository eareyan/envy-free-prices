CREATE TABLE unit_demand (
	n integer NOT NULL,
	m integer NOT NULL,
	p double precision NOT NULL,
	ckEfficiency double precision NOT NULL,
	ckRevenue double precision NOT NULL,
	ckTime double precision NOT NULL,
	ckWE1 double precision NOT NULL,
	ckWE2 double precision NOT NULL,
	evpEfficiency double precision NOT NULL,
	evpRevenue double precision NOT NULL,
	evpTime double precision NOT NULL,
	evpWE1 double precision NOT NULL,
	evpWE2 double precision NOT NULL,
	mweqEfficiency double precision NOT NULL,
	mweqRevenue double precision NOT NULL,
	mweqTime double precision NOT NULL,
	mweqWE1 double precision NOT NULL,
	mweqWE2 double precision NOT NULL
	);

CREATE TABLE unit_uniform_demand (
	n integer NOT NULL,
	m integer NOT NULL,
	p double precision NOT NULL,
	ckEfficiency double precision NOT NULL,
	ckRevenue double precision NOT NULL,
	ckTime double precision NOT NULL,
	ckWE1 double precision NOT NULL,
	ckWE2 double precision NOT NULL,
	evpEfficiency double precision NOT NULL,
	evpRevenue double precision NOT NULL,
	evpTime double precision NOT NULL,
	evpWE1 double precision NOT NULL,
	evpWE2 double precision NOT NULL,
	mweqEfficiency double precision NOT NULL,
	mweqRevenue double precision NOT NULL,
	mweqTime double precision NOT NULL,
	mweqWE1 double precision NOT NULL,
	mweqWE2 double precision NOT NULL,
	lpEfficiency double precision NOT NULL,
	lpRevenue double precision NOT NULL,
	lpTime double precision NOT NULL,
	lpWE1 double precision NOT NULL,
	lpWE2 double precision NOT NULL
	);

CREATE TABLE fancy_underdemand (
	n integer NOT NULL,
	m integer NOT NULL,
	p double precision NOT NULL,
	b integer NOT NULL,
	ckEfficiency double precision NOT NULL,
	ckRevenue double precision NOT NULL,
	ckTime double precision NOT NULL,
	ckWE1 double precision NOT NULL,
	ckWE2 double precision NOT NULL,
	lpOptEfficiency double precision NOT NULL,
	lpOptRevenue double precision NOT NULL,
	lpOptTime double precision NOT NULL,
	lpOptWE1 double precision NOT NULL,
	lpOptWE2 double precision NOT NULL,
	lpWFEfficiency double precision NOT NULL,
	lpWFRevenue double precision NOT NULL,
	lpWFTime double precision NOT NULL,
	lpWFWE1 double precision NOT NULL,
	lpWFWE2 double precision NOT NULL,
	lpG1Efficiency double precision NOT NULL,
	lpG1Revenue double precision NOT NULL,
	lpG1Time double precision NOT NULL,
	lpG1WE1 double precision NOT NULL,
	lpG1WE2 double precision NOT NULL,
	lpG2Efficiency double precision NOT NULL,
	lpG2Revenue double precision NOT NULL,
	lpG2Time double precision NOT NULL,
	lpG2WE1 double precision NOT NULL,
	lpG2WE2 double precision NOT NULL
	);


CREATE TABLE fancy_unitsupply_underdemand (
	n integer NOT NULL,
	m integer NOT NULL,
	p double precision NOT NULL,
	b integer NOT NULL,
	lpOptEfficiency double precision NOT NULL,
	lpOptRevenue double precision NOT NULL,
	lpOptTime double precision NOT NULL,
	lpOptWE1 double precision NOT NULL,
	lpOptWE2 double precision NOT NULL,
	lpWFEfficiency double precision NOT NULL,
	lpWFRevenue double precision NOT NULL,
	lpWFTime double precision NOT NULL,
	lpWFWE1 double precision NOT NULL,
	lpWFWE2 double precision NOT NULL,
	lpG1Efficiency double precision NOT NULL,
	lpG1Revenue double precision NOT NULL,
	lpG1Time double precision NOT NULL,
	lpG1WE1 double precision NOT NULL,
	lpG1WE2 double precision NOT NULL,
	lpG2Efficiency double precision NOT NULL,
	lpG2Revenue double precision NOT NULL,
	lpG2Time double precision NOT NULL,
	lpG2WE1 double precision NOT NULL,
	lpG2WE2 double precision NOT NULL
	);

CREATE TABLE fancy_overdemand (
	n integer NOT NULL,
	m integer NOT NULL,
	p double precision NOT NULL,
	b integer NOT NULL,
	ckEfficiency double precision NOT NULL,
	ckRevenue double precision NOT NULL,
	ckTime double precision NOT NULL,
	ckWE1 double precision NOT NULL,
	ckWE2 double precision NOT NULL,
	lpOptEfficiency double precision NOT NULL,
	lpOptRevenue double precision NOT NULL,
	lpOptTime double precision NOT NULL,
	lpOptWE1 double precision NOT NULL,
	lpOptWE2 double precision NOT NULL,
	lpWFEfficiency double precision NOT NULL,
	lpWFRevenue double precision NOT NULL,
	lpWFTime double precision NOT NULL,
	lpWFWE1 double precision NOT NULL,
	lpWFWE2 double precision NOT NULL,
	lpG1Efficiency double precision NOT NULL,
	lpG1Revenue double precision NOT NULL,
	lpG1Time double precision NOT NULL,
	lpG1WE1 double precision NOT NULL,
	lpG1WE2 double precision NOT NULL,
	lpG2Efficiency double precision NOT NULL,
	lpG2Revenue double precision NOT NULL,
	lpG2Time double precision NOT NULL,
	lpG2WE1 double precision NOT NULL,
	lpG2WE2 double precision NOT NULL
	);

CREATE TABLE fancy_unitsupply_overdemand (
	n integer NOT NULL,
	m integer NOT NULL,
	p double precision NOT NULL,
	b integer NOT NULL,
	lpOptEfficiency double precision NOT NULL,
	lpOptRevenue double precision NOT NULL,
	lpOptTime double precision NOT NULL,
	lpOptWE1 double precision NOT NULL,
	lpOptWE2 double precision NOT NULL,
	lpWFEfficiency double precision NOT NULL,
	lpWFRevenue double precision NOT NULL,
	lpWFTime double precision NOT NULL,
	lpWFWE1 double precision NOT NULL,
	lpWFWE2 double precision NOT NULL,
	lpG1Efficiency double precision NOT NULL,
	lpG1Revenue double precision NOT NULL,
	lpG1Time double precision NOT NULL,
	lpG1WE1 double precision NOT NULL,
	lpG1WE2 double precision NOT NULL,
	lpG2Efficiency double precision NOT NULL,
	lpG2Revenue double precision NOT NULL,
	lpG2Time double precision NOT NULL,
	lpG2WE1 double precision NOT NULL,
	lpG2WE2 double precision NOT NULL
	);


CREATE TABLE allocation (
	n integer NOT NULL,
	m integer NOT NULL,
	p double precision NOT NULL,
	greedyToEfficient double precision NOT NULL,
	wfToEfficient double precision NOT NULL,
	wfToGreedy double precision NOT NULL
	);

\copy (SELECT * FROM unit_demand ORDER BY n,m,p) to '/home/eareyanv/workspace/envy-free-prices/results/results-unit_demand.csv' csv header
\copy (SELECT * FROM unit_uniform_demand ORDER BY n,m,p) to '/home/eareyanv/workspace/envy-free-prices/results/results-unit_uniform_demand.csv' csv header

\copy (SELECT lpReservePriceRevenue / evpAppRevenue FROM unit_uniform_demand WHERE lpReservePriceRevenue >= evpAppRevenue AND p=0.25) to '/home/eareyanv/workspace/envy-free-prices/results/unit-uniform-demand/lpBiggerEqualevpapp-p25.csv' csv header

\copy unit_demand to '/home/eareyanv/workspace/envy-free-prices/results/results-unit_demand.csv' csv header
\copy unit_uniform_demand to '/home/eareyanv/workspace/envy-free-prices/results/results-unit_uniform_demand.csv' csv header


\copy fancy_underdemand to '/home/eareyanv/workspace/envy-free-prices/results/results-fancy_underdemand.csv' csv header
\copy fancy_overdemand to '/home/eareyanv/workspace/envy-free-prices/results/results-fancy_overdemand.csv' csv header

SELECT n,m,p,ckEfficiency,ckRevenue,ckTime,ckWE1,ckWE2,ck2Efficiency,ck2Revenue,ck2Time,ck2WE1,ck2WE2 FROM fancy_underdemand;
SELECT n,m,p,ckEfficiency,ckRevenue,ckTime,ckWE1,ckWE2,ck2Efficiency,ck2Revenue,ck2Time,ck2WE1,ck2WE2 FROM fancy_overdemand;
SELECT n,m,p, lprevenue, evprevenue FROM unit_uniform_demand WHERE lprevenue > evprevenue;

